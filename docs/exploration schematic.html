---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "exploration schematic.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: exploration schematic.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fastcore.utils</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">nbtschematic</span> <span class="k">as</span> <span class="nn">sch</span>
<span class="kn">from</span> <span class="nn">nbtschematic</span> <span class="kn">import</span> <span class="n">SchematicFile</span>
<span class="kn">import</span> <span class="nn">nbtlib</span>
<span class="kn">from</span> <span class="nn">nbtlib.tag</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sf</span> <span class="o">=</span> <span class="n">SchematicFile</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;plantationsqr.schem&#39;</span><span class="p">,</span> <span class="n">gzipped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sf</span><span class="o">.</span><span class="vm">__dict__</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;filename&#39;: &#39;plantationsqr.schem&#39;, &#39;gzipped&#39;: True, &#39;byteorder&#39;: &#39;big&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sf</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>dict_keys([&#39;PaletteMax&#39;, &#39;Palette&#39;, &#39;Version&#39;, &#39;Length&#39;, &#39;Metadata&#39;, &#39;Height&#39;, &#39;DataVersion&#39;, &#39;BlockData&#39;, &#39;BlockEntities&#39;, &#39;Width&#39;, &#39;Offset&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sf</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>  <span class="n">L</span><span class="p">(</span><span class="o">*</span><span class="n">sf</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;BlockData&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>((Short(30), Short(37), Short(37)),
 (#42335) [Byte(0),Byte(0),Byte(0),Byte(0),Byte(0),Byte(1),Byte(0),Byte(0),Byte(0),Byte(0)...])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">materials_with_nbt</span> <span class="o">=</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">):</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">sf</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;Palette&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="n">r_materials</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">sf</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;Palette&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">r_materials</span><span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
<span class="n">materials</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">r_materials</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">r_materials</span><span class="p">[</span><span class="n">m</span><span class="p">]:</span>
        <span class="n">materials</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">m</span>
<span class="n">materials</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{3: &#39;minecraft:cave_air&#39;,
 38: &#39;minecraft:brick_slab&#39;,
 82: &#39;minecraft:brick_slab&#39;,
 58: &#39;minecraft:brick_slab&#39;,
 145: &#39;minecraft:quartz_stairs&#39;,
 87: &#39;minecraft:quartz_stairs&#39;,
 99: &#39;minecraft:quartz_stairs&#39;,
 94: &#39;minecraft:quartz_stairs&#39;,
 42: &#39;minecraft:quartz_stairs&#39;,
 106: &#39;minecraft:quartz_stairs&#39;,
 166: &#39;minecraft:quartz_stairs&#39;,
 92: &#39;minecraft:quartz_stairs&#39;,
 107: &#39;minecraft:quartz_stairs&#39;,
 46: &#39;minecraft:quartz_stairs&#39;,
 104: &#39;minecraft:quartz_stairs&#39;,
 105: &#39;minecraft:quartz_stairs&#39;,
 144: &#39;minecraft:quartz_stairs&#39;,
 95: &#39;minecraft:quartz_stairs&#39;,
 167: &#39;minecraft:quartz_stairs&#39;,
 110: &#39;minecraft:quartz_stairs&#39;,
 28: &#39;minecraft:quartz_stairs&#39;,
 48: &#39;minecraft:quartz_stairs&#39;,
 85: &#39;minecraft:quartz_stairs&#39;,
 83: &#39;minecraft:quartz_stairs&#39;,
 56: &#39;minecraft:stripped_spruce_wood&#39;,
 57: &#39;minecraft:stripped_spruce_wood&#39;,
 55: &#39;minecraft:stripped_spruce_wood&#39;,
 16: &#39;minecraft:redstone_wire&#39;,
 20: &#39;minecraft:redstone_wire&#39;,
 10: &#39;minecraft:redstone_wire&#39;,
 11: &#39;minecraft:redstone_wire&#39;,
 152: &#39;minecraft:smooth_quartz_stairs&#39;,
 142: &#39;minecraft:smooth_quartz_stairs&#39;,
 154: &#39;minecraft:smooth_quartz_stairs&#39;,
 155: &#39;minecraft:smooth_quartz_stairs&#39;,
 161: &#39;minecraft:smooth_quartz_stairs&#39;,
 157: &#39;minecraft:smooth_quartz_stairs&#39;,
 115: &#39;minecraft:smooth_quartz_stairs&#39;,
 162: &#39;minecraft:smooth_quartz_stairs&#39;,
 78: &#39;minecraft:smooth_quartz_stairs&#39;,
 114: &#39;minecraft:smooth_quartz_stairs&#39;,
 156: &#39;minecraft:smooth_quartz_stairs&#39;,
 153: &#39;minecraft:smooth_quartz_stairs&#39;,
 86: &#39;minecraft:smooth_quartz_stairs&#39;,
 139: &#39;minecraft:smooth_quartz_stairs&#39;,
 138: &#39;minecraft:smooth_quartz_stairs&#39;,
 76: &#39;minecraft:smooth_quartz_stairs&#39;,
 77: &#39;minecraft:smooth_quartz_stairs&#39;,
 159: &#39;minecraft:smooth_quartz_stairs&#39;,
 79: &#39;minecraft:smooth_quartz_stairs&#39;,
 160: &#39;minecraft:smooth_quartz_stairs&#39;,
 143: &#39;minecraft:smooth_quartz_stairs&#39;,
 69: &#39;minecraft:smooth_quartz_stairs&#39;,
 68: &#39;minecraft:glass_pane&#39;,
 71: &#39;minecraft:glass_pane&#39;,
 12: &#39;minecraft:repeater&#39;,
 18: &#39;minecraft:repeater&#39;,
 81: &#39;minecraft:white_stained_glass_pane&#39;,
 80: &#39;minecraft:white_stained_glass_pane&#39;,
 53: &#39;minecraft:quartz_bricks&#39;,
 36: &#39;minecraft:calcite&#39;,
 122: &#39;minecraft:birch_door&#39;,
 62: &#39;minecraft:birch_door&#39;,
 66: &#39;minecraft:birch_door&#39;,
 120: &#39;minecraft:birch_door&#39;,
 73: &#39;minecraft:birch_door&#39;,
 125: &#39;minecraft:birch_door&#39;,
 135: &#39;minecraft:birch_door&#39;,
 130: &#39;minecraft:birch_door&#39;,
 132: &#39;minecraft:birch_door&#39;,
 72: &#39;minecraft:birch_door&#39;,
 75: &#39;minecraft:birch_door&#39;,
 63: &#39;minecraft:birch_door&#39;,
 170: &#39;minecraft:deepslate_tile_stairs&#39;,
 171: &#39;minecraft:deepslate_tile_stairs&#39;,
 149: &#39;minecraft:deepslate_tile_stairs&#39;,
 150: &#39;minecraft:deepslate_tile_stairs&#39;,
 148: &#39;minecraft:deepslate_tile_stairs&#39;,
 147: &#39;minecraft:deepslate_tile_stairs&#39;,
 151: &#39;minecraft:deepslate_tile_stairs&#39;,
 164: &#39;minecraft:deepslate_tile_stairs&#39;,
 163: &#39;minecraft:deepslate_tile_stairs&#39;,
 172: &#39;minecraft:deepslate_tile_stairs&#39;,
 165: &#39;minecraft:deepslate_tile_stairs&#39;,
 45: &#39;minecraft:light_gray_glazed_terracotta&#39;,
 44: &#39;minecraft:light_gray_glazed_terracotta&#39;,
 41: &#39;minecraft:light_gray_glazed_terracotta&#39;,
 40: &#39;minecraft:light_gray_glazed_terracotta&#39;,
 141: &#39;minecraft:smooth_sandstone_slab&#39;,
 90: &#39;minecraft:smooth_sandstone_slab&#39;,
 109: &#39;minecraft:smooth_sandstone_slab&#39;,
 116: &#39;minecraft:oak_trapdoor&#39;,
 84: &#39;minecraft:quartz_slab&#39;,
 93: &#39;minecraft:quartz_slab&#39;,
 26: &#39;minecraft:bricks&#39;,
 174: &#39;minecraft:quartz_pillar&#39;,
 50: &#39;minecraft:quartz_pillar&#39;,
 173: &#39;minecraft:quartz_pillar&#39;,
 127: &#39;minecraft:dark_oak_door&#39;,
 119: &#39;minecraft:dark_oak_door&#39;,
 124: &#39;minecraft:dark_oak_door&#39;,
 128: &#39;minecraft:dark_oak_door&#39;,
 121: &#39;minecraft:dark_oak_door&#39;,
 123: &#39;minecraft:dark_oak_door&#39;,
 129: &#39;minecraft:dark_oak_door&#39;,
 131: &#39;minecraft:dark_oak_door&#39;,
 65: &#39;minecraft:dark_oak_door&#39;,
 133: &#39;minecraft:dark_oak_door&#39;,
 134: &#39;minecraft:dark_oak_door&#39;,
 118: &#39;minecraft:dark_oak_door&#39;,
 117: &#39;minecraft:dark_oak_door&#39;,
 74: &#39;minecraft:dark_oak_door&#39;,
 5: &#39;minecraft:granite&#39;,
 137: &#39;minecraft:lever&#39;,
 88: &#39;minecraft:lever&#39;,
 136: &#39;minecraft:lever&#39;,
 91: &#39;minecraft:lever&#39;,
 113: &#39;minecraft:waxed_cut_copper&#39;,
 1: &#39;minecraft:stone&#39;,
 168: &#39;minecraft:deepslate_tile_slab&#39;,
 158: &#39;minecraft:deepslate_tile_slab&#39;,
 146: &#39;minecraft:deepslate_tile_slab&#39;,
 25: &#39;minecraft:brick_stairs&#39;,
 30: &#39;minecraft:brick_stairs&#39;,
 27: &#39;minecraft:brick_stairs&#39;,
 47: &#39;minecraft:brick_stairs&#39;,
 23: &#39;minecraft:brick_stairs&#39;,
 49: &#39;minecraft:brick_stairs&#39;,
 32: &#39;minecraft:brick_stairs&#39;,
 29: &#39;minecraft:brick_stairs&#39;,
 61: &#39;minecraft:diorite_stairs&#39;,
 101: &#39;minecraft:diorite_stairs&#39;,
 103: &#39;minecraft:diorite_stairs&#39;,
 112: &#39;minecraft:diorite_stairs&#39;,
 100: &#39;minecraft:diorite_stairs&#39;,
 97: &#39;minecraft:diorite_stairs&#39;,
 98: &#39;minecraft:diorite_stairs&#39;,
 22: &#39;minecraft:azalea_leaves&#39;,
 34: &#39;minecraft:dark_oak_wood&#39;,
 33: &#39;minecraft:dark_oak_wood&#39;,
 37: &#39;minecraft:dark_oak_wood&#39;,
 102: &#39;minecraft:redstone_lamp&#39;,
 169: &#39;minecraft:redstone_lamp&#39;,
 2: &#39;minecraft:gravel&#39;,
 67: &#39;minecraft:smooth_quartz&#39;,
 70: &#39;minecraft:pink_terracotta&#39;,
 140: &#39;minecraft:birch_slab&#39;,
 51: &#39;minecraft:iron_bars&#39;,
 52: &#39;minecraft:iron_bars&#39;,
 19: &#39;minecraft:note_block&#39;,
 17: &#39;minecraft:note_block&#39;,
 13: &#39;minecraft:note_block&#39;,
 21: &#39;minecraft:dirt_path&#39;,
 111: &#39;minecraft:white_wool&#39;,
 31: &#39;minecraft:chiseled_quartz_block&#39;,
 39: &#39;minecraft:stripped_dark_oak_log&#39;,
 43: &#39;minecraft:stripped_dark_oak_log&#39;,
 6: &#39;minecraft:coal_ore&#39;,
 24: &#39;minecraft:flowering_azalea_leaves&#39;,
 9: &#39;minecraft:air&#39;,
 15: &#39;minecraft:grass_block&#39;,
 59: &#39;minecraft:campfire&#39;,
 60: &#39;minecraft:campfire&#39;,
 64: &#39;minecraft:oak_button&#39;,
 4: &#39;minecraft:diorite&#39;,
 54: &#39;minecraft:stripped_spruce_log&#39;,
 96: &#39;minecraft:stripped_spruce_log&#39;,
 0: &#39;minecraft:sandstone&#39;,
 126: &#39;minecraft:light_blue_terracotta&#39;,
 8: &#39;minecraft:packed_ice&#39;,
 108: &#39;minecraft:smooth_quartz_slab&#39;,
 89: &#39;minecraft:smooth_quartz_slab&#39;,
 7: &#39;minecraft:dirt&#39;,
 14: &#39;minecraft:gold_block&#39;,
 35: &#39;minecraft:dark_oak_planks&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="s1">&#39;test[]&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;test&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="c1"># prepare some coordinates</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">indices</span><span class="p">((</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="c1"># draw cuboids in the top left and bottom right corners, and a link between</span>
<span class="c1"># them</span>
<span class="n">cube1</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">z</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">cube2</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">z</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">link</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">z</span><span class="p">)</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">z</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span>

<span class="c1"># combine the objects into a single boolean array</span>
<span class="n">voxelarray</span> <span class="o">=</span> <span class="n">cube1</span> <span class="o">|</span> <span class="n">cube2</span> <span class="o">|</span> <span class="n">link</span>

<span class="c1"># set the colors of each object</span>
<span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">voxelarray</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
<span class="n">colors</span><span class="p">[</span><span class="n">link</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>
<span class="n">colors</span><span class="p">[</span><span class="n">cube1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span>
<span class="n">colors</span><span class="p">[</span><span class="n">cube2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span>

<span class="c1"># and plot everything</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">voxels</span><span class="p">(</span><span class="n">voxelarray</span><span class="p">,</span> <span class="n">facecolors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>


